<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

	<title>What the hell is "this" in JavaScript</title>

	<link rel="stylesheet" href="css/reset.css" />
	<link rel="stylesheet" href="css/reveal.css" />
	<link rel="stylesheet" href="css/theme/black.css" />

	<!-- Theme used for syntax highlighting of code -->
	<link rel="stylesheet" href="lib/css/monokai.css" />

	<!-- Printing and PDF exports -->
	<script>
		var link = document.createElement("link");
		link.rel = "stylesheet";
		link.type = "text/css";
		link.href = window.location.search.match(/print-pdf/gi)
			? "css/print/pdf.css"
			: "css/print/paper.css";
		document.getElementsByTagName("head")[0].appendChild(link);
	</script>

	<style>
		.italic {
			font-style: italic;
		}

		.stack-rect {
			height: 10px;
		}

		.stack-rect--red {
			background-color: red;
		}
	</style>
</head>

<body>
	<div class="reveal">
		<div class="slides">
			<section>
				<h1>
					What the hell is <span class="italic">this</span> in
					JavaScript
				</h1>
				<h3>Jürgen Ratzenböck</h3>
			</section>
			<section>
				<h2><span class="italic">this</span> is strange</h2>
				<pre>
			  		<code data-trim data-noescape>
						function foo() {
							setTimeout( function(){
								console.log( this.a );
							}, 100);
						}
						
						var obj = {
							a: 2,
							foo: foo
						};
						obj.foo();
					</code>
				</pre>
				<pre class="fragment fade-in">
					<code>undefined</code>
				</pre>
			</section>
			<section data-background-image="https://media.giphy.com/media/2yU3Ex75PRjeE/giphy.gif">
			</section>
			<section>
				<h2><span class="italic">this</span> is not</h2>
				<span class="fragment fade-in">refering to function itself</span>
				<pre class="fragment fade-in">
						<code data-trim data-noescape>
							function foo() { 
								this.count++;
							}
							foo.count = 10;
							foo();
							console.log(foo);	// 10
						</code>
					</pre>
			</section>
			<section>
				<h2><span class="italic">this</span> is not</h2>
				<span class="fragment fade-in">dependent on scope</span>
				<pre class="fragment fade-in">
							<code data-trim data-noescape>
									function foo() {
										var a = 2;
										this.bar();
									}
									function bar() {
										console.log( this.a );
									}
									foo();	// undefined
							</code>
						</pre>
			</section>
			<section>
				<h2>It's all about the call site</h2>
				<ul>
					<li>runtime-binding instead of author-time binding</li>
					<li>context-based on function invocation</li>
					<li>how the function is called matters</li>
				</ul>
			</section>
			<section>
				<h2>What is then the call site?</h2>
				<div style="display: flex">
					<div style="flex-grow: 1">
						<pre><code data-trim data-noescape>
								function baz() {
									console.log( "baz" );
									bar();
								}
								function bar() {
									console.log( "bar" );
									foo();
								}
								function foo() {
									console.log( "foo" );
								}
								baz();
						</code></pre>
					</div>
					<div style="flex-grow: 1">
						<div class="stack-rect stack-rect--red">global</div>
					</div>
				</div>
			</section>
		</div>
	</div>

	<script src="js/reveal.js"></script>

	<script>
		// More info about config & dependencies:
		// - https://github.com/hakimel/reveal.js#configuration
		// - https://github.com/hakimel/reveal.js#dependencies
		Reveal.initialize({
			dependencies: [
				{ src: "plugin/markdown/marked.js" },
				{ src: "plugin/markdown/markdown.js" },
				{ src: "plugin/notes/notes.js", async: true },
				{ src: "plugin/highlight/highlight.js", async: true }
			]
		});
	</script>
</body>

</html>